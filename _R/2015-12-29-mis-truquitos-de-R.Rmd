---
layout: post
title: "Recopilación de trucos/cozitas de R"
author: Pedro J. Perez
description: 
category: r
tags: [Truquitos, R, In progress]
comments: true
---

```{r setup, echo = FALSE, warning=FALSE}
library(knitr)
opts_chunk$set(message=FALSE, cache=TRUE, warning=FALSE, echo=TRUE, dev="jpeg", fig.width=12, fig.height=8, fig.path='Figs/' )
```

En este post iré recopilando cosas que voy aprendiendo de R que creo que me pueden ser útiles. Como las iré recopilando poquet a poquet resultará en que este post va a estar continuamente (al menos hasta que DoRR) en progreso. 

Este post lo empecé a escribir el 30 de marzo de 2016 pero lo voy a poner despues de hello worls (en 2015), y lo voy a ir actualizando conforme vaya recopilando los truquitos. Muchos los tengo/tenía ya en un archivo pero no estaban subidos al blog.    

La fecha de compilación del post es [`r Sys.Date()`]


------------------------ 

<br>  

**METACRAN**: para bucear en los R-packages ve a:  [METACRAN](http://www.r-pkg.org/)






------------------------ 

<br>  
**REDONDEO**:   
Escrito el 2016-03-30

Karl Broman ayudó [aquí](https://gist.github.com/kbroman/5217617) a la chica de la taza (Hilary Parker). Son una pandilla!! Se conocen todos entre ellos!!!  

Karl Broman dixit [aquí](http://kbroman.org/knitr_knutshell/pages/Rmarkdown.html)(more or less):  

> I'm very particular about the rounding of results. I don’t want to see 0.9032738. I want 0.90. You could use the R function round, like this: `round(cor(x,y), 2)` But that would produce 0.9 instead of 0.90. One solution is to use: `sprintf("%.2f", cor(x,y))`. But a problem arises if the value is -0.001. `sprintf("%.2f", -0.001)` will produce -0.00. My solution to this problem is the myround function in my R/broman package.

``` {r, rounding }
# a function to deal with sprintf("%.2f", ...) returning -0.00
# see https://twitter.com/hspter/status/314858331598626816

f <- function(..., dig=2) {
  g <- sprintf(paste0("%.", dig, "f"), ...)
  z <- paste0("0.", paste(rep("0", dig), collapse=""))
  g[g==paste0("-",z)] <- z
  g
}

# this should return c("0.000", "0.000", "0.500", "-0.500", "-0.002")
f(c(-0.0002, 0.0002, 0.5, -0.5, -0.002), dig=3)

```



------------------------ 

<br>  

**SESSION INFO**:   
Escrito el: 2016-03-30

```{r, session_info}
devtools::session_info()
```


------------------------ 

<br>  

**Viewing R-Markdown output in real-time** with **servr** package   
[servr](https://github.com/yihui/servr)   provide real-time viewing of document in RStudio viewer while editing the source file.


```
install.packages('servr')  # stable version; use a CRAN mirror, or
servr::httd()
servr::httd(dir = "C:/Users/perezp/Desktop/a_GIT_2016/perezp44.github.io/"  )

```

Hice lo de arriba y me creo como una pagina web de "todo" mi PC

------------------------ 

<br>  

**LOADING LIBRARIES**:   
Escrito el: 2016-03-30


```
libs <- c("dplyr", "ggplot2", "pwt8", "sfsmisc", "personal.pjp")
sapply(libs, library, character.only = TRUE, logical.return = TRUE)
rm(libs)
```

```{r loading_eurostat, echo = T, eval = F}
#- Loading eurostat package
if (!require(eurostat)) {install_github("ropengov/eurostat")}     #- installing
library(eurostat)                                                 #- loading
if (!require(forecast)) {install.packages("forecast")}            #- installing
```

```{r, eval = F}
PACKAGES <- c("eurostat","ggplot2","countrycode","tidyr","dplyr","knitr")
#  Install packages
inst <- match(PACKAGES, .packages(all=TRUE))  #- mira si hay un match
need <- which(is.na(inst))
if (length(need) > 0) install.packages(PACKAGES[need])
# Load packages
lapply(PACKAGES, require, character.only=T)
```

------------------------ 

<br>  

**Creating directories**:   
Escrito el: 2016-03-30

```{r create_directory, echo = T, eval = F}
# create folders
dir.create("./zip/", recursive = TRUE)  #- en el wd
```


------------------------ 

<br>  

**VER las f. que tiene un package**:   
Escrito el: 2016-03-30


```{r , echo = T, eval = F}
funs.eurostat <- as.data.frame(ls("package:eurostat"))   #- las f. del package
```


------------------------ 

<br>  

**VER las f. que tiene un package**:   
Escrito el: 2016-03-30

Estaba intentando resolver un Pb en R y me he encontrado con esto:  
<http://r.789695.n4.nabble.com/Extending-a-vector-to-length-n-td886064.html>   
En unos años puedo ser Hadley Wickham. Lo veo claro!!   

